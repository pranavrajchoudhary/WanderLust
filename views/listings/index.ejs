<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listings | WanderLust</title>
    <link rel="stylesheet" href=" /index.css">
        <link rel="icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ-zeHGQI4HvdJxsC9z28tZ9_gpIPE0hDM73Q&s"  >

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

     <style>
        .search-container {
    text-align: center;
    margin: 20px auto;
}

#searchInput {
    padding: 10px 15px;
    width: 90%;
    max-width: 500px;
    font-size: 1rem;
    border: 1px solid #ccc;
    border-radius: 10px;
    outline: none;
    box-shadow: 0 0 5px rgba(0,0,0,0.1);
}

/* Mobile Responsive */
@media (max-width: 600px) {
    #searchInput {
        width: 95%;
        font-size: 0.9rem;
    }
}

     </style>

</head>
<%- include("../partials/navbar.ejs") %>
<%- include("../partials/flash.ejs") %>

    <body>
        <!-- Search Bar -->
<div class="search-container">
    <input type="text" id="searchInput" placeholder="Search stay by title or location...">
</div>

        
        <h1 class="page-title">All Listings</h1>

<div class="listings-container">
    <% allListings.forEach(i => { %>
    <div class="listing-card">
        <a href="/listings/<%-i._id%>" >
            <img src="<%- i.image.url %>" alt="<%- i.title %>">
            <div class="listing-content">
                <h2><%- i.title %></h2>
                <p class="location">üìç <%- i.location %></p>
                <p class="price">‚Çπ<%- i.price %> / night</p>
                <button class="view-btn">View Details</button>
            </div>
        </a>
    </div>
    <% }); %>
</div>










 
        
 




        <%- include("../partials/footer.ejs") %>


       
        <script>
// Ye JS search bar ko live filter krne ke liye h
const searchInput = document.getElementById('searchInput');

// Sabhi cards fetch krlo
const allCards = document.querySelectorAll('.listing-card');

searchInput.addEventListener('input', () => {
    const searchText = searchInput.value.toLowerCase();

    allCards.forEach(card => {
        const title = card.querySelector('h2').innerText.toLowerCase();
        const location = card.querySelector('.location').innerText.toLowerCase();

        // Agar search match kare title ya location me toh show kro
        if (title.includes(searchText) || location.includes(searchText)) {
            card.style.display = 'block';
        } else {
            card.style.display = 'none';
        }
    });
});
</script>

    </body>

</html>